max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
load_all()
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
load_all()
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
load_all()
load_all()
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
load_all()
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
load_all()
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
load_all()
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
load_all()
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
load_all()
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
load_all()
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
summary(wbrt.cox1)
summary(wbrt.cox2)
summary_phcsh_mpl(wbrt.analysis3)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
testdata <- testsim[[3]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
testdata <- testsim[[1]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
testdata <- testsim[[1]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
testdata <- testsim[[1]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
testsim[[1]]
testsim[[1]]
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
testdata <- testsim[[1]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
testsim[[1]]
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
testdata <- testsim[[1]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
exp(1.6577659 - 0.4893208*rnorm(1) + 1.1618825*rnorm(1))
z1test <- rnorm(1)
z2test <- rnorm(1)
z1test / exp(1.6577659 - 0.4893208*0.4893208 + 1.1618825*z2test)
z1test / exp(1.6577659 - 0.4893208*z1test + 1.1618825*z2test)
z1test / (1+exp(1.6577659 - 0.4893208*z1test + 1.1618825*z2test))
z1test / (1+exp(1.5 +0.5*z1test -0.5*z2test))
z1test / (1+exp(1.5 +0.5*z1test -0.5*z2test))^2
testsim[[1]]
testsim[[1]]
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
testsim[[1]]
testdata <- testsim[[1]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
cure
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
testsim[[1]]
testdata <- testsim[[1]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
testsim[[1]]
testsim[[1]]
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
testsim[[1]]
# High Dimensional Data
mX = matrix(rnorm(45000), 90, 500)
mX
vCoef1 = rep(0, 500)
vCoef1
vCoef2 = rnorm(500)
vCoef2
vCoef3 = rnorm(500)
vCoef3
# vector of probabilities
vProb = cbind(exp(mX%*%vCoef1), exp(mX%*%vCoef2), exp(mX%*%vCoef3))
vProb
# multinomial draws
mChoices = t(apply(vProb, 1, rmultinom, n = 1, size = 1))
mChoices
rmultinom
y = apply(mChoices, 1, function(x) which(x==1))
y
> set.seed(666)
> x1 = rnorm(1000)           # some continuous variables
set.seed(666)
x1 = rnorm(1000)           # some continuous variables
x2 = rnorm(1000)
z = 1 + 2*x1 + 3*x2        # linear combination with a bias
z
pr = 1/(1+exp(-z))         # pass through an inv-logit function
y = rbinom(1000,1,pr)      # bernoulli response variable
y
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
load_all()
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
testsim[[1]]
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
testsim[[1]]
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)))
testsim[[1]]
source("~/Documents/PhD/CR cure fraction/run generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 1.5, cureMax = 4.5)
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
source("~/Documents/PhD/CR cure fraction/run generate phcshcf data.R", echo=TRUE)
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 0, cureMax = 4.5)
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 0, cureMax = 4.5)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 0, cureMax = 4.5)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 0, cureMax = 4.5)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 0, cureMax = 4.5)
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
testsim[[1]]
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 0, cureMax = 4.5)
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 0, cureMax = 4.5)
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 0, cureMax = 4.5)
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 0, cureMax = 4.5)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 0, cureMax = 4.5)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 0, cureMax = 4.5)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 0, cureMax = 4.5)
testsim[[1]]
testsim[[1]]
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 0, cureMax = 4.5)
testdata <- testsim[[1]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
source("~/Documents/PhD/CR cure fraction/run generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 1.5, cureMax = 4.5)
testdata <- testsim[[1]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
load_all()
testdata <- testsim[[1]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
testdata <- testsim[[2]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
testdata <- testsim[[3]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
use_r("phcshcf_mpl2")
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 1.5, cureMax = 4.5)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 1.5, cureMax = 4.5)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 1.5, cureMax = 4.5)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
alltime1 <- sapply(testsim, function(a) a$time)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 1.5, cureMax = 4.5)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 1.5, cureMax = 4.5)
testsim[[1]]
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 1.5, cureMax = 4.5)
testsim[[1]]
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 1.5, cureMax = 4.5)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 1.5, cureMax = 4.5)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 1.5, cureMax = 4.5)
source("~/Documents/PhD/CR cure fraction/Generate phcshcf data.R", echo=TRUE)
testsim <- gen.phcshcf.data(n.datasets = 5, n.obs = 1000, prob_event = 0.2, rho = 3, lambda1 = 1,
lambda2 = 0.5, betas = list(c(0.5,-2), c(1,-1)), gammaL = 0.5, gammaR = 2.5,
pi.r.z.coef = list(c(0.5,0.5, -0.5), c(0.25, 0.5, -0.5)),
cureMin = 1.5, cureMax = 4.5)
testsim[[1]]
testsim[[1]]
testdata <- testsim[[3]]
test.cf <- phcshcf_mpl(Surv(time, time2, event=event, "interval") ~ x1 + x2,
risk = testdata$risk, data = testdata,
z = as.matrix(cbind(testdata$z1, testdata$z2)), max.outer = 1,
max.iter = 1000, lambda = c(1e-5,1e-5), n.basis = NULL, iknots.pos = NULL,
aps = TRUE, knots.perc.limit = c(0.05,0.95), tmid = TRUE, iter.disp = TRUE)
test.cf
